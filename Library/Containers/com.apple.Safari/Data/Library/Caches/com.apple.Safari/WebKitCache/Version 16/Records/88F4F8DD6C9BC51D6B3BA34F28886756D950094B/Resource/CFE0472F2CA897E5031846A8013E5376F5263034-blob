var Wpm=function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function e(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}u((r=r.apply(e,t||[])).next())}))}function t(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}function n(e,t){return void 0===t&&(t=window),{create:function(){var n=e.type,r=e.create(t);return{collect:function(){var e=r.collect();return{type:n,metric:e}}}}}}function r(e){return"object"==typeof e&&!!e}function o(e){return"function"==typeof e}function i(e){return"string"==typeof e}function a(e){return"number"==typeof e&&e>=0&&e<=1}function c(e){return String(e).length>=13}function u(e,t){for(var n={},r=0;r<e.length;r++){n[e[r]]=t}return n}function f(){return r(window.performance)&&o(window.performance.getEntriesByType)}function d(e){return o(window.PerformanceObserver)&&(r(t=window.PerformanceObserver.supportedEntryTypes)&&"number"==typeof t.length)&&function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}(window.PerformanceObserver.supportedEntryTypes,e);var t}var s=n({type:"lcp",create:function(){var e=null,t=null;return d("paint")&&(t=new PerformanceObserver((function(t){var n=t.getEntries();e=n[n.length-1]}))).observe({type:"largest-contentful-paint",buffered:!0}),{collect:function(){return t&&t.disconnect(),e}}}}),l=[n({type:"fcp",create:function(e){return{collect:function(){return d("paint")&&e.performance.getEntriesByName("first-contentful-paint")[0]||null}}}}),s,n({type:"performanceNavigationTiming",create:function(e){return{collect:function(){if(f()&&d("navigation")){var t=e.performance.getEntriesByType("navigation")[0];if(t)return t}return null}}}}),n({type:"networkInformation",create:function(e){return{collect:function(){return r(e.navigator)&&r(e.navigator.connection)?e.navigator.connection:null}}}}),n({type:"resourceTiming",create:function(){return{collect:function(){return f()&&d("resource")?window.performance.getEntriesByType("resource"):null}}}}),n({type:"navigationTiming",create:function(e){return{collect:function(){return r(e.performance)&&r(e.performance.timing)?e.performance.timing:null}}}}),n({type:"visibilityChange",create:function(e){var t=!1,n=!1;function i(){t||"hidden"!==e.document.visibilityState||(t=!0)}return r(e.document)&&o(e.document.addEventListener)&&(n=!0,e.document.addEventListener("visibilitychange",i)),{collect:function(){return n?(e.document.removeEventListener("visibilitychange",i),t):null}}}})],m=function(){function e(e){this.collectors=[];for(var t=0;t<e.length;t++)this.collectors.push(e[t].create())}return e.prototype.collect=function(){for(var e={},t=0;t<this.collectors.length;t++){var n=this.collectors[t].collect(),r=n.type,o=n.metric;e[r]={metric:o}}return e},e}();function v(e,t){return n=e,r=t,new Promise((function(e,t){var o=new window.XMLHttpRequest;o.open("POST",n,!0),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(r)),o.addEventListener("load",(function(){var n=JSON.parse(o.response);o.status>=400?t(n):e(n)})),o.addEventListener("error",(function(e){t(e)}))}));var n,r}var p=-1;function g(){return u(["redirect","network","request","response","htmlParsing","domContentLoadEvent","renderComplete","onLoadEvent","load"],p)}function h(e){return u(["script","link","img","video","audio","embed","others","css","xmlhttprequest","beacon","fetch"],e)}function y(e){return{cache:{cached:h(e),nonCached:h(e)},timing:{beforeDomLoad:h(e),afterDomLoad:h(e)}}}function w(e){return e.transferSize<e.encodedBodySize}function E(e){switch(e.initiatorType){case"script":case"link":case"img":case"video":case"audio":case"css":case"xmlhttprequest":case"fetch":case"beacon":return e.initiatorType;case"embed":case"object":case"iframe":return"embed";default:return"others"}}function b(){var e=y(-1);return{size:e,count:e}}var S={redirectCount:function(e){var t=e.performanceNavigationTiming.metric;return t?t.redirectCount:p},navigationTiming:function(e){var t,n=e.performanceNavigationTiming.metric,r=e.navigationTiming.metric,o=n||r;if(o){var i=o.redirectEnd,a=o.redirectStart,u=o.connectEnd,f=o.fetchStart,d=o.responseStart,s=o.requestStart,l=o.responseEnd,m=o.domContentLoadedEventEnd,v=o.domContentLoadedEventStart,h=o.domComplete,y=o.loadEventEnd,w=o.loadEventStart,E=p;if(n)E=n.duration;else if(r){if(function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}([(t=r).connectEnd,t.fetchStart,t.responseStart,t.requestStart,t.responseEnd,t.domContentLoadedEventEnd,t.domContentLoadedEventStart,t.domComplete,t.loadEventEnd,t.loadEventStart,t.navigationStart],(function(e){return!c(e)})))return g();E=r.loadEventEnd-r.navigationStart}return{redirect:i-a,network:u-f,request:d-s,response:l-d,htmlParsing:v-l,domContentLoadEvent:m-v,renderComplete:h-m,onLoadEvent:y-w,load:E}}return g()},webVitals:function(e){var t=e.fcp,n=e.lcp,r=e.performanceNavigationTiming,o=e.navigationTiming,i=p;return r.metric?i=r.metric.domContentLoadedEventStart:o.metric&&c(o.metric.domContentLoadedEventStart)&&c(o.metric.navigationStart)&&(i=o.metric.domContentLoadedEventStart-o.metric.navigationStart),{fcp:t.metric?t.metric.startTime:p,lcp:n.metric?n.metric.startTime:p,dcl:i}},effectiveType:function(e){var t=e.networkInformation;return t.metric?t.metric.effectiveType:"UNKNOWN"},resourceTiming:function(e){var t=e.performanceNavigationTiming.metric,n=e.navigationTiming.metric,r=e.resourceTiming.metric;if(!t&&!n||!r)return b();var o=y(0),i=y(0),a=p;if(t)a=t.domContentLoadedEventStart;else if(n){if(!c(n.domContentLoadedEventStart)||!c(n.navigationStart))return b();a=n.domContentLoadedEventStart-n.navigationStart}for(var u=r,f=0;f<u.length;f++){var d=u[f],s=E(d),l=(d.encodedBodySize||0)/1e3;if(l>2e6)return b();d.startTime>a?(i.timing.afterDomLoad[s]+=1,o.timing.afterDomLoad[s]+=l):(i.timing.beforeDomLoad[s]+=1,o.timing.beforeDomLoad[s]+=l),w(d)?(i.cache.cached[s]+=1,o.cache.cached[s]+=l):(i.cache.nonCached[s]+=1,o.cache.nonCached[s]+=l)}return{size:o,count:i}}};function T(e,t){if("number"==typeof e){if("KB"===t)return e>2e6;if("ms"===t)return e>6e4}else if("object"==typeof e&&e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&T(e[n],t))return!0;return!1}var L="load",C="onload";function k(e){!function(e){o(window.addEventListener)?window.addEventListener(L,e):o(window.attachEvent)&&window.attachEvent(C,e)}((function t(){!function(e){o(window.removeEventListener)?window.removeEventListener(L,e):o(window.detachEvent)&&window.detachEvent(C,e)}(t),e()}))}function N(e,t){return"appKey"===e||"pageId"===e?i(t):"onError"===e?o(t):"sampling"===e&&a(t)}function O(e){return i(e.appKey)&&i(e.pageId)}return function(){var n=function(){var e,t={},n=null===(e=window.Wpm)||void 0===e?void 0:e.queue;if(null==n?void 0:n.length)for(var r=0;r<n.length;r++){var o=n[r],i=o[0],a=o[1];N(i,a)&&(t[i]=a)}return t}(),r=new m(l),i=!1;function c(n){var c,u,f=this;i||(i=!0,c=function(){return e(f,void 0,void 0,(function(){var e,i,c;return t(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),a(n.sampling)&&function(e){if(!((new Date).getMilliseconds()<=1e3*e))throw new Error("Beacon Sampling")}(n.sampling),e=r.collect(),i=function(e,t,n){var r,o=S.redirectCount(n),i=S.navigationTiming(n),a=S.webVitals(n),c=S.resourceTiming(n),u=S.effectiveType(n);return(T(i,"ms")||T(a,"ms")||T(c,"KB"))&&(r=n),{applicationKey:e,pageCode:t,url:window.location.href,sendAt:Date.now(),redirectCount:o,navigationTiming:i,webVitals:a,resourceTiming:c,effectiveType:u,extra:r}}(n.appKey,n.pageId,e),[4,v("https://malibu-ingest.onkakao.net/api/v1/event/applications/"+n.appKey,i)];case 1:return t.sent(),[3,3];case 2:return c=t.sent(),o(n.onError)&&n.onError(c),[3,3];case 3:return[2]}}))}))},u=function(){return setTimeout(c,1e3)},"complete"===document.readyState?u():k(u))}return O(n)&&c(n),function(e,t){n[e]=t,O(n)&&c(n)}}()}();
